var react=0;function refresh(e=0){e=e||buildFilter(),react=0,getData("/exception/ByType",doChart1),getData("/exception/ByObject",doChart2),getData("/exception/ByLine",doChart3),getData("/exception/TopByObject",doTopTable)}function doTopTable(e){$("#dtable").bootstrapTable("load",e)}function buildFilter(){return{a:1}}function doChart1(e){let t=[],o=(e.labels.forEach(e=>{t.push(e)}),[]);e.values.forEach(e=>{o.push(e)});e={labels:t,values:o,type:"pie",hole:.2,textinfo:"label+value",textposition:"outside",automargin:!0};Plotly.newPlot("chart1_div",[e],{responsive:!1,showlegend:!1,height:260,autosize:!0,margin:{l:20,r:20,b:20,t:0,pad:0}}),document.getElementById("chart1_div").on("plotly_click",function(e){console.log(e.points[0].x,e.points[0].y)})}function doChart2(e){let t=[],o=(e.labels.forEach(e=>{t.push(e)}),[]);e.values.forEach(e=>{o.push(e)});e={labels:t,values:o,type:"pie",hole:.2,textinfo:"label+value",textposition:"outside",automargin:!0};Plotly.newPlot("chart2_div",[e],{responsive:!1,showlegend:!1,height:260,autosize:!0,margin:{l:20,r:20,b:20,t:0,pad:0}}),document.getElementById("chart1_div").on("plotly_click",function(e){console.log(e.points[0].x,e.points[0].y)})}function doChart3(e){let t=[],o=(e.labels.forEach(e=>{t.push(e)}),[]);e.values.forEach(e=>{o.push(e)});e={labels:t,values:o,type:"pie",hole:.2,textinfo:"label+value",textposition:"outside",automargin:!0};Plotly.newPlot("chart3_div",[e],{responsive:!1,showlegend:!1,height:260,autosize:!0,margin:{l:20,r:20,b:20,t:0,pad:0}}),document.getElementById("chart1_div").on("plotly_click",function(e){console.log(e.points[0].x,e.points[0].y)})}$(function(){refresh(),$("#dateFrom").change(e=>{refresh()}),$("#dateTo").change(e=>{refresh()}),$("#system").change(e=>{refresh()}),$("#line").change(e=>{refresh()}),$("#object").change(e=>{refresh()}),$("#exception").change(e=>{refresh()})});var toHHMMSS=e=>{e=parseInt(e,10);return[Math.floor(e/3600),Math.floor(e/60)%60,e%60].map(e=>e<10?"0"+e:e).filter((e,t)=>"00"!==e||0<t).join(":")};function secondsToDhms(e){e=Number(e);var t=Math.floor(e/86400),o=Math.floor(e%86400/3600),a=Math.floor(e%3600/60);Math.floor(e%60);return(0<t?t+(1==t?" day, ":" days, "):"")+(0<o?o+(1==o?" hour, ":" hours, "):"")+(0<a?a+(1==a?" minute, ":" minutes "):"")}
